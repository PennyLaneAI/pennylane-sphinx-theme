{% if pagename != "search" %}
<div class="localtoc-container nano has-scrollbar">
  <div class="nano-content">
    <div id="localtoc">
      {% set toc_html = toctree(maxdepth=3, collapse=True, includehidden=True) %}
      {% if theme_toc_subset and toc_html.strip() and 'toctree-l2' in toc_html %}
        <h3>Depth 3 Contents</h3>
        <!-- Display the ToC for a subset of the current document tree. -->
        {{ toctree(maxdepth=3, collapse=True, includehidden=True) }}
      {% else %}
        {% if toc and toc.strip() %}
          <h3>Local Contents</h3>
          <!-- Display the local ToC for the current document if it is not empty. -->
          {{ toc }}
        {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endif %}
